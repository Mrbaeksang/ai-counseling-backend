spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update  # 초기 스키마 생성을 위해 update 사용 (마이그레이션 준비 후 validate로 변경)
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  ai:
    openai:
      chat:
        options:
          custom-headers:
            HTTP-Referer: ${OPENROUTER_SITE_URL:https://ai-counseling-backend-production.up.railway.app}

# 운영 환경 CORS 설정 (모바일 앱은 origin이 없으므로 * 허용)
cors:
  allowed-origins:
    - ${FRONTEND_URL:*}
  allowed-methods:
    - GET
    - POST
    - PUT
    - DELETE
  allowed-headers: "*"
  allow-credentials: true

# 운영 환경 로깅
logging:
  level:
    root: WARN
    com.aicounseling: INFO

# 운영 환경 보안 설정
server:
  error:
    include-message: never
    include-stacktrace: never
