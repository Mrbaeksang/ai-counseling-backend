# ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

## AI ìƒë‹´ ì‹œìŠ¤í…œ Use Case Diagram

```mermaid
graph TB
    %% ìŠ¤íƒ€ì¼ ì •ì˜
    classDef actor fill:#2196F3,stroke:#0D47A1,stroke-width:2px,color:#FFFFFF
    classDef usecase fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#FFFFFF
    classDef system fill:#9C27B0,stroke:#4A148C,stroke-width:3px,color:#FFFFFF
    
    %% ì•¡í„°
    User[ğŸ‘¤ ì‚¬ìš©ì]:::actor
    OAuth[ğŸ” OAuth Provider]:::actor  
    AI[ğŸ¤– OpenRouter AI]:::actor
    
    %% ì‹œìŠ¤í…œ ê²½ê³„
    subgraph System[" AI ìƒë‹´ ì‹œìŠ¤í…œ (Spring Boot + Kotlin) "]
        %% ì¸ì¦ ê´€ë ¨ (êµ¬í˜„ ì™„ë£Œ)
        UC1[OAuth ë¡œê·¸ì¸<br/>Google/Kakao/Naver]:::usecase
        UC2[JWT í† í° ë°œê¸‰]:::usecase
        UC3[í† í° ê°±ì‹ ]:::usecase
        UC4[í”„ë¡œí•„ ì¡°íšŒ]:::usecase
        UC5[ë‹‰ë„¤ì„ ë³€ê²½]:::usecase
        UC6[íšŒì› íƒˆí‡´]:::usecase
        
        %% ìƒë‹´ì‚¬ ê´€ë ¨ (êµ¬í˜„ ì™„ë£Œ)
        UC7[ìƒë‹´ì‚¬ ëª©ë¡ ì¡°íšŒ]:::usecase
        UC8[ìƒë‹´ì‚¬ ìƒì„¸ ì •ë³´]:::usecase
        UC9[ì¦ê²¨ì°¾ê¸° ì¶”ê°€/ì œê±°]:::usecase
        UC10[ì¦ê²¨ì°¾ê¸° ëª©ë¡]:::usecase
        
        %% ì„¸ì…˜ ê´€ë ¨ (êµ¬í˜„ ì™„ë£Œ)
        UC11[ìƒˆ ì„¸ì…˜ ì‹œì‘]:::usecase
        UC12[ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ]:::usecase
        UC13[ì„¸ì…˜ ì¢…ë£Œ]:::usecase
        UC14[ì„¸ì…˜ ë¶ë§ˆí¬]:::usecase
        UC15[ì„¸ì…˜ ì œëª© ë³€ê²½]:::usecase
        
        %% ëŒ€í™” ê´€ë ¨ (êµ¬í˜„ ì™„ë£Œ)
        UC16[ë©”ì‹œì§€ ì „ì†¡]:::usecase
        UC17[AI ì‘ë‹µ ìƒì„±<br/>5ë‹¨ê³„ ìƒë‹´]:::usecase
        UC18[ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ]:::usecase
        UC19[ìƒë‹´ ë‹¨ê³„ ìë™ ì „í™˜]:::usecase
        
        %% í‰ê°€ ê´€ë ¨ (êµ¬í˜„ ì™„ë£Œ)
        UC20[ì„¸ì…˜ í‰ê°€<br/>1-10ì ]:::usecase
        UC21[í”¼ë“œë°± ì‘ì„±]:::usecase
    end
    
    %% ì‚¬ìš©ì ì—°ê²°
    User --> UC1
    User --> UC3
    User --> UC4
    User --> UC5
    User --> UC6
    User --> UC7
    User --> UC8
    User --> UC9
    User --> UC10
    User --> UC11
    User --> UC12
    User --> UC13
    User --> UC14
    User --> UC15
    User --> UC16
    User --> UC18
    User --> UC20
    User --> UC21
    
    %% OAuth Provider ì—°ê²°
    OAuth --> UC1
    OAuth --> UC2
    
    %% AI ì‹œìŠ¤í…œ ì—°ê²°
    AI --> UC17
    AI --> UC19
    
    %% Include ê´€ê³„
    UC1 -.include.-> UC2
    UC11 -.include.-> UC7
    UC16 -.include.-> UC17
    UC17 -.include.-> UC19
    UC13 -.include.-> UC20
    
    %% Extend ê´€ê³„
    UC7 -.extend.-> UC8
    UC20 -.extend.-> UC21
    UC12 -.extend.-> UC14
    UC12 -.extend.-> UC15
```

## ì£¼ìš” ìœ ìŠ¤ì¼€ì´ìŠ¤ ìƒì„¸ ì„¤ëª…

### ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ (OAuth 2.0)
| Use Case | ì„¤ëª… | êµ¬í˜„ ìƒíƒœ |
|----------|------|-----------|
| OAuth ë¡œê·¸ì¸ | Google, Kakao, Naver ì†Œì…œ ë¡œê·¸ì¸ | âœ… ì™„ë£Œ |
| JWT í† í° ë°œê¸‰ | Access Token + Refresh Token | âœ… ì™„ë£Œ |
| í† í° ê°±ì‹  | Refresh Tokenìœ¼ë¡œ ìƒˆ Access Token ë°œê¸‰ | âœ… ì™„ë£Œ |
| í”„ë¡œí•„ ì¡°íšŒ | ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (GET /api/users/me) | âœ… ì™„ë£Œ |
| ë‹‰ë„¤ì„ ë³€ê²½ | ì‚¬ìš©ì ë‹‰ë„¤ì„ ìˆ˜ì • | âœ… ì™„ë£Œ |
| íšŒì› íƒˆí‡´ | ê³„ì • ë° ê´€ë ¨ ë°ì´í„° ì‚­ì œ | âœ… ì™„ë£Œ |

### ğŸ§‘â€ğŸ’¼ ìƒë‹´ì‚¬ ê´€ë¦¬
| Use Case | ì„¤ëª… | êµ¬í˜„ ìƒíƒœ |
|----------|------|-----------|
| ìƒë‹´ì‚¬ ëª©ë¡ | í˜ì´ì§€ë„¤ì´ì…˜ëœ ìƒë‹´ì‚¬ ë¦¬ìŠ¤íŠ¸ | âœ… ì™„ë£Œ |
| ìƒë‹´ì‚¬ ìƒì„¸ | ê°œë³„ ìƒë‹´ì‚¬ ì •ë³´ ë° í†µê³„ | âœ… ì™„ë£Œ |
| ì¦ê²¨ì°¾ê¸° ê´€ë¦¬ | ìƒë‹´ì‚¬ ì¦ê²¨ì°¾ê¸° ì¶”ê°€/ì œê±° | âœ… ì™„ë£Œ |
| ì¦ê²¨ì°¾ê¸° ëª©ë¡ | ì¦ê²¨ì°¾ê¸°í•œ ìƒë‹´ì‚¬ ì¡°íšŒ | âœ… ì™„ë£Œ |

### ğŸ’¬ ìƒë‹´ ì„¸ì…˜
| Use Case | ì„¤ëª… | êµ¬í˜„ ìƒíƒœ |
|----------|------|-----------|
| ì„¸ì…˜ ì‹œì‘ | ì„ íƒí•œ ìƒë‹´ì‚¬ì™€ ìƒˆ ëŒ€í™” ì‹œì‘ | âœ… ì™„ë£Œ |
| ì„¸ì…˜ ëª©ë¡ | ë‚´ ìƒë‹´ ì„¸ì…˜ ëª©ë¡ (ë¶ë§ˆí¬ í•„í„°) | âœ… ì™„ë£Œ |
| ì„¸ì…˜ ì¢…ë£Œ | ì§„í–‰ ì¤‘ì¸ ì„¸ì…˜ ì¢…ë£Œ | âœ… ì™„ë£Œ |
| ì„¸ì…˜ ë¶ë§ˆí¬ | ì¤‘ìš” ì„¸ì…˜ ë¶ë§ˆí¬ í† ê¸€ | âœ… ì™„ë£Œ |
| ì œëª© ë³€ê²½ | ì„¸ì…˜ ì œëª© ìˆ˜ì • | âœ… ì™„ë£Œ |

### ğŸ—¨ï¸ ëŒ€í™” ì‹œìŠ¤í…œ
| Use Case | ì„¤ëª… | êµ¬í˜„ ìƒíƒœ |
|----------|------|-----------|
| ë©”ì‹œì§€ ì „ì†¡ | ì‚¬ìš©ì ë©”ì‹œì§€ ì „ì†¡ | âœ… ì™„ë£Œ |
| AI ì‘ë‹µ | OpenRouter APIë¡œ AI ì‘ë‹µ ìƒì„± | âœ… ì™„ë£Œ |
| ë©”ì‹œì§€ ì¡°íšŒ | ì„¸ì…˜ë³„ ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ | âœ… ì™„ë£Œ |
| ìƒë‹´ ë‹¨ê³„ | 5ë‹¨ê³„ ìë™ ì „í™˜ (AI ììœ¨ íŒë‹¨) | âœ… ì™„ë£Œ |

### â­ í‰ê°€ ì‹œìŠ¤í…œ
| Use Case | ì„¤ëª… | êµ¬í˜„ ìƒíƒœ |
|----------|------|-----------|
| ì„¸ì…˜ í‰ê°€ | 1-10ì  í‰ê°€ (ë³„ì  0.5-5.0) | âœ… ì™„ë£Œ |
| í”¼ë“œë°± ì‘ì„± | ìµœëŒ€ 500ì í…ìŠ¤íŠ¸ í”¼ë“œë°± | âœ… ì™„ë£Œ |

## 5ë‹¨ê³„ ìƒë‹´ í”„ë¡œì„¸ìŠ¤

AIê°€ ëŒ€í™” ë§¥ë½ì„ ë¶„ì„í•˜ì—¬ ìë™ìœ¼ë¡œ ë‹¨ê³„ë¥¼ ì „í™˜í•©ë‹ˆë‹¤:

```mermaid
stateDiagram-v2
    [*] --> ENGAGEMENT: ì„¸ì…˜ ì‹œì‘
    ENGAGEMENT --> EXPLORATION: ê´€ê³„ í˜•ì„± í›„
    EXPLORATION --> INSIGHT: ë¬¸ì œ íŒŒì•… í›„
    INSIGHT --> ACTION: í†µì°° ì œê³µ í›„
    ACTION --> CLOSING: í–‰ë™ ê³„íš ìˆ˜ë¦½ í›„
    CLOSING --> [*]: ì„¸ì…˜ ì¢…ë£Œ
    
    ENGAGEMENT: ê´€ê³„ í˜•ì„±
    EXPLORATION: ë¬¸ì œ íƒìƒ‰
    INSIGHT: í†µì°° ìœ ë„
    ACTION: í–‰ë™ ê³„íš
    CLOSING: ë§ˆë¬´ë¦¬
```

## ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Spring Boot 3.5.4, Kotlin 1.9.25
- **Database**: PostgreSQL (ìš´ì˜), H2 (ê°œë°œ)
- **AI**: OpenRouter API (meta-llama/llama-3.2-3b-instruct)
- **ì¸ì¦**: OAuth 2.0 + JWT
- **ì•„í‚¤í…ì²˜**: DDD (Domain-Driven Design)

## ì•¡í„°(Actor) ì„¤ëª…

### ğŸ‘¤ ì‚¬ìš©ì (User)
- OAuth ë¡œê·¸ì¸í•œ ì¼ë°˜ ì‚¬ìš©ì
- ìƒë‹´ì‚¬ ì„ íƒ, ëŒ€í™”, í‰ê°€ ê¸°ëŠ¥ ì‚¬ìš©

### ğŸ” OAuth Provider
- Google, Kakao, Naver
- ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ì œê³µ

### ğŸ¤– OpenRouter AI
- AI ìƒë‹´ì‚¬ ì‘ë‹µ ìƒì„±
- 5ë‹¨ê³„ ìƒë‹´ í”„ë¡œì„¸ìŠ¤ ììœ¨ ì§„í–‰
- meta-llama/llama-3.2-3b-instruct ëª¨ë¸ ì‚¬ìš©

## í–¥í›„ ê°œë°œ ì˜ˆì •

### Phase 2
- ëŒ€í™” ë‚´ìš© ê²€ìƒ‰
- ì„¸ì…˜ ìš”ì•½ ê¸°ëŠ¥
- ìƒë‹´ í†µê³„ ëŒ€ì‹œë³´ë“œ

### Phase 3
- ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket)
- ìŒì„± ìƒë‹´
- ê·¸ë£¹ ìƒë‹´ ì„¸ì…˜